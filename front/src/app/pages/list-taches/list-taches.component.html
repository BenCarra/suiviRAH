<h1 >Liste des tâches</h1>

<div class="filtre-container">
  <mat-form-field>
    <mat-label>Filtre par semaine</mat-label>
    <!-- [()] est une syntaxe de liaison bidirectionnelle
    lorsque l'utilisateur sélectionne une option dans le menu déroulant, selectedWeek est automatiquement mis à jour  -->
    <mat-select [(value)]="selectedWeek" (selectionChange)="loadTachesByWeek({week: selectedWeek.week,year: selectedWeek.year})" [compareWith]="compareWeekNumber">
      <!-- [value]="week" signifie que lorsque je sélectionne une semaine, l'objet week 
      est passé comme la valeur sélectionnée -->
      <mat-option *ngFor="let week of weeks" [value]="week">{{week.week}} </mat-option>
    </mat-select>
  </mat-form-field>
  <!-- Si l'objet selectedWeekStartEnd est true, ie défini alors angular
  ajoute l'élément au DOM  -->
  <p *ngIf="selectedWeekStartEnd">
    Du {{ selectedWeekStartEnd.start | date: 'dd/MM/yyyy' }} au {{ selectedWeekStartEnd.end | date: 'dd/MM/yyyy' }}
  </p>
</div>

<div class="table-container">
  <table >
    <thead>
      <tr>
        <th>Nom</th>
        <th>Type de tâche</th>
        <th>Date</th>
        <th>Durée </th>
        <th>Commentaires </th>
        <th>Projet </th>
        <th>MCO</th>
        <th>Nouvelle Demande</th>
        <th>Modifier</th>
        <th>Supprimer</th>
        <th>Dupliquer</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let tache of tachesByWeek">
        <td>{{ tache.nomTache}}</td>
        <td>{{ tache.libelleTypeTache}}</td>
        <td>{{ tache.dateTache | date: 'dd/MM/yyyy'  }}</td>
        <td>{{ tache.dureeTache }}</td>
        <td>{{ tache.commentaires }}</td>
        <td>{{ tache.nomProjet }}</td>
        <td>{{ tache.mco ? 'oui' : 'non' }}</td>
        <td>{{ tache.nouvelleDemande ? 'oui' : 'non' }}</td>
        <td><button [routerLink]="['/formUpdateTache']" [queryParams]="{ id: tache.idTache }">Modifier</button></td>
        <td><button (click)="onDeleteTache(tache.idTache)">Supprimer</button></td>
        <td><button (click)="onDuplicateTache(tache.idTache, tache)">Dupliquer</button></td>
      </tr>
    </tbody>
  </table>
</div>
<div class="create-tache" >
    <p>Ajouter une tâche</p>
    <img src="/assets/img/PlusVert.png" [routerLink]="['/formCreateTache']" alt="Ajout d'une tâche">
</div>


