<div class="liste">
    <h3>LISTE DES TYPES DE TÂCHES</h3>
    <form class="filtrage" [formGroup]="formFiltrage">
        <select title="filtrage-demande" class="filtrage-demande" formControlName="filtrageDemande"
            (change)="updateFiltrage()">
            <option disabled [selected]="formFiltrage.value.filtrageDemande == ''">-- Sélectionner un filtre --</option>
            <option value="Par libellé de type tâche">Rechercher par libellé de type tâche</option>
        </select>
        @if (formFiltrage.get("filtrageDemande")?.getRawValue() == "Par libellé de type tâche") {
        <select title="libelles-type-tache" id="libelles-type-tache" autocomplete formControlName="typeTacheRecherche">
            <option disabled [selected]="formFiltrage.value.filtrageDemande == 'Par libellé de type tâche'">--
                Sélectionner
                un type de tâche --</option>
            @for (libelleTypeTache of listLibellesTypesTache; track $index) {
            <option [value]="libelleTypeTache">{{ libelleTypeTache }}</option>
            }
        </select>
        }
        <input type="submit" id="btn-soumission" formControlName="boutonSoumission" (click)="onSearch()">
        <input type="reset" id="btn-reset" (click)="onReset()" formControlName="boutonReset">
    </form>

    <div class="table">
        <table border="2">
            <thead>
                <tr>
                    <th>Libellé</th>
                    <!-- <th>Tâches associées</th> -->
                    <th>Modifier</th>
                </tr>
            </thead>
            <tbody>
                @for (typeTache of listTypesTache; track $index) {
                <tr title="{{ typeTache.idTypeTache }}">
                    <td>{{ typeTache.libelle }}</td>
                    <!-- <td>
                        @for (tache of typeTache.listTaches; track $index){
                        <ul>
                            <li>Tâche n°{{ tache[0] }}</li>
                            <li>{{ tache[1] }}</li>
                        </ul>
                        <br>
                        }
                    </td> -->
                    <td><button type="button" routerLink="/parametres/updateTypeTache/"
                            [queryParams]="{ id: typeTache.idTypeTache}">Modifier</button></td>
                </tr>
                }
            </tbody>
        </table>
    </div>
</div>